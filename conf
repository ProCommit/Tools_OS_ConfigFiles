" =======================================
" COC (Conquer of Completion) - VSCode style
" =======================================

" --- Completion behavior ---
" Let Coc trigger completion automatically (default)
let g:coc_enable_auto_trigger = 1

" Configure popup menu options
set completeopt=menu,menuone,noinsert,noselect

" --- Key mappings for completion ---
" Tab → next item, triggers completion if none
inoremap <silent><expr> <Tab>
      \ coc#pum#visible() ? coc#pum#next(1) :
      \ coc#refresh()

" Shift+Tab → previous item
inoremap <silent><expr> <S-Tab>
      \ coc#pum#visible() ? coc#pum#prev(1) :
      \ "\<C-h>"

" Enter → confirm selection if popup visible
" Otherwise → just insert a normal newline
inoremap <silent><expr> <CR>
      \ coc#pum#visible() ? coc#pum#confirm() :
      \ "\<CR>"

" Space → always insert space (never confirm)
inoremap <silent><expr> <Space> "\<Space>"

" Optional: Ctrl+Space → manually trigger completion
inoremap <silent><expr> <C-Space> coc#refresh()

" --- LSP actions ---
" Go to definition
nmap <silent> gd <Plug>(coc-definition)

" Find references
nmap <silent> gr <Plug>(coc-references)

" Show documentation / hover info
nmap <silent> K :call CocActionAsync('doHover')<CR>

" Rename symbol
nmap <leader>rn <Plug>(coc-rename)

" Format current buffer
nmap <leader>f <Plug>(coc-format)
